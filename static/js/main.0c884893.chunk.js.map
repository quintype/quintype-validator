{"version":3,"sources":["home-component.js","index.tsx"],"names":["GetUrlComponent","e","preventDefault","this","props","onSubmit","url","accepted","length","reader","FileReader","onload","x","onImport","JSON","parse","target","result","readAsText","accept","onDrop","importResult","className","acceptClassName","rejectClassName","disableClick","_","submit","value","placeholder","onChange","type","React","Component","ResultSection","state","active","errors","warnings","expandable","children","onClick","setState","title","status","map","error","index","key","DebugSection","href","rel","results","entries","flatMap","category","debug","toRow","links","link","onValidate","Results","amp","headers","structured","numObjects","contentId","og","seo","robots","onDownload","HomeComponent","response","loading","request","post","then","body","catch","message","loadRules","blob","Blob","stringify","FileSaver","saveAs","processUrl","import","downloadResponse","ReactDOM","render","document","getElementById"],"mappings":"6WASMA,E,+KACGC,GACLA,EAAEC,iBACFC,KAAKC,MAAMC,SAASF,KAAKC,MAAME,O,mCAGpBC,GAAW,IAAD,OACrB,GAAuB,IAApBA,EAASC,OAAZ,CAGA,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAACC,GAAD,OAAO,EAAKR,MAAMS,SAASC,KAAKC,MAAMH,EAAEI,OAAOC,UAC/DR,EAAOS,WAAWX,EAAS,O,+BAGnB,IAAD,OACP,OAAO,kBAAC,IAAD,CAAUY,OAAO,mBACPC,OAAQ,SAACb,GAAD,OAAc,EAAKc,aAAad,IACxCe,UAAU,eACVC,gBAAgB,sBAChBC,gBAAgB,sBAChBC,cAAc,IAC5B,SAAAC,GAAC,OAAI,0BAAMJ,UAAU,gBAAgBjB,SAAU,SAACJ,GAAD,OAAO,EAAK0B,OAAO1B,KACjE,2BAAOqB,UAAU,YAAYM,MAAO,EAAKxB,MAAME,IAAKuB,YAAY,YAAYC,SAAU,SAAC7B,GAAD,OAAO,EAAKG,MAAM0B,SAAS7B,EAAEe,OAAOY,UAC1H,2BAAOG,KAAK,SAAST,UAAU,SAASM,MAAM,gB,GAxBxBI,IAAMC,WA8B9BC,E,YACJ,WAAY9B,GAAQ,IAAD,8BACjB,4CAAMA,KACD+B,MAAQ,CACXC,QAAQ,GAHO,E,sEAOT,IAAD,OACDC,EAASlC,KAAKC,MAAMa,OAAOoB,QAAU,GACrCC,EAAWnC,KAAKC,MAAMa,OAAOqB,UAAY,GACzCC,EAAapC,KAAKC,MAAMoC,UAAYH,EAAO7B,OAAS,GAAK8B,EAAS9B,OAAS,EACjF,OAAO,6BAASc,UAAS,iBAAYnB,KAAKgC,MAAMC,QAAU,WACxD,4BAAQd,UAAS,wBAAmBiB,GAAc,cAAgBE,QAAS,kBAAMF,GAAc,EAAKG,SAAS,CAACN,QAAS,EAAKD,MAAMC,WAChI,yBAAKd,UAAU,YACb,wBAAIA,UAAU,gBAAgBnB,KAAKC,MAAMuC,OACzC,wBAAIrB,UAAS,sCAAiCnB,KAAKC,MAAMa,OAAO2B,OAAnD,YAA6DN,EAAS9B,OAAS,EAAI,qBAAuB,KACpHL,KAAKC,MAAMa,OAAO2B,UAIzB,yBAAKtB,UAAU,eACZnB,KAAKC,MAAMoC,UAAY,6BAAMrC,KAAKC,MAAMoC,UAExCH,EAAO7B,OAAS,GAAK,6BACpB,uCACA,4BAAK6B,EAAOQ,KAAI,SAACC,EAAOC,GAAR,OAAkB,wBAAIC,IAAKD,GAAQD,QAGpDR,EAAS9B,OAAS,GAAK,6BACtB,yCACA,4BAAK8B,EAASO,KAAI,SAACC,EAAOC,GAAR,OAAkB,wBAAIC,IAAKD,GAAQD,c,GA/BnCd,IAAMC,W,IA8C5BgB,E,YACJ,WAAY7C,GAAQ,IAAD,8BACjB,4CAAMA,KACD+B,MAAQ,CACXC,QAAQ,GAHO,E,sEAOT,IAAD,OACP,OAAO,6BAASd,UAAS,iBAAYnB,KAAKgC,MAAMC,QAAU,WACxD,4BAAQd,UAAS,2BAA8BmB,QAAS,kBAAM,EAAKC,SAAS,CAACN,QAAS,EAAKD,MAAMC,WAC/F,yBAAKd,UAAU,YACb,wBAAIA,UAAU,gBAAd,eAGJ,yBAAKA,UAAU,eACb,qEAA0C,uBAAG4B,KAAK,iDAAiDlC,OAAO,SAASmC,IAAI,uBAA7E,cAC1C,6BACE,+BACE,+BACE,4BACE,wCACA,mCACA,uCAGJ,+BACGzB,IAAEvB,KAAKC,MAAMgD,SAASC,UAAUC,SAAQ,mCAAEC,EAAF,KAAYtC,EAAZ,YAAwBS,IAAET,EAAOuC,OAAOH,UAAUR,KAAI,mCAAEG,EAAF,KAAOpB,EAAP,YAnC7G,SAAe2B,EAAUP,EAAKpB,GAC5B,OAAO,wBAAIoB,IAAG,UAAKO,EAAL,YAAiBP,IAC7B,4BAAKO,GACL,wBAAIjC,UAAU,aAAa0B,GAC3B,4BAAKpB,IA+BsH6B,CAAMF,EAAUP,EAAKpB,MAAQA,WAASA,WAI5JzB,KAAKC,MAAMsD,MAAMlD,OAAS,GAAK,6BAC9B,sCACA,4BAAKL,KAAKC,MAAMsD,MAAMb,KAAI,SAACc,EAAMZ,GAAP,OAAiB,wBAAIC,IAAKD,GAAO,4BAAQN,QAAS,kBAAM,EAAKrC,MAAMwD,WAAWD,KAA7C,YAAhB,MAAyFA,c,GAjCnH3B,IAAMC,WAwC3B4B,E,iLACM,IAAD,OACP,OAAO,6BACL,kBAAC,EAAD,CAAelB,MAAM,MAAM1B,OAAQd,KAAKC,MAAMgD,QAAQU,MACtD,kBAAC,EAAD,CAAenB,MAAM,kBAAkB1B,OAAQd,KAAKC,MAAMgD,QAAQW,UAClE,kBAAC,EAAD,CAAepB,MAAM,kBAAkB1B,OAAQd,KAAKC,MAAMgD,QAAQY,YAChE,mDAAyB7D,KAAKC,MAAMgD,QAAQY,WAAWC,YACvD,4CAAkB9D,KAAKC,MAAMgD,QAAQY,WAAWE,YAElD,kBAAC,EAAD,CAAevB,MAAM,mBAAmB1B,OAAQd,KAAKC,MAAMgD,QAAQe,KACnE,kBAAC,EAAD,CAAexB,MAAM,YAAY1B,OAAQd,KAAKC,MAAMgD,QAAQgB,MAC5D,kBAAC,EAAD,CAAezB,MAAM,SAAS1B,OAAQd,KAAKC,MAAMgD,QAAQiB,SAEzD,kBAAC,EAAD,CAAcjB,QAASjD,KAAKC,MAAMgD,QAASM,MAAOvD,KAAKC,MAAMsD,MAAOE,WAAYzD,KAAKC,MAAMwD,aAE3F,4BAAQtC,UAAU,mBAAmBmB,QAAS,kBAAM,EAAKrC,MAAMkE,eAA/D,yB,GAfgBtC,IAAMC,WAoBfsC,EAAb,YACE,WAAYnE,GAAQ,IAAD,8BACjB,4CAAMA,KACD+B,MAAQ,CACX7B,IAAK,GACLkE,SAAU,KACVC,SAAS,EACT3B,MAAO,MANQ,EADrB,uEAWYxC,GAAM,IAAD,OACboE,IAAQC,KAAK,qBAAsB,CAACrE,IAAKA,IACjCsE,MAAK,SAAAJ,GAAQ,OAAI,EAAK9B,SAAS,CAAC8B,SAAUA,EAASK,KAAMJ,SAAS,EAAOnE,IAAKkE,EAASK,KAAKvE,SAC5FwE,OAAM,SAAA7E,GAAC,OAAI,EAAKyC,SAAS,CAAC+B,SAAS,EAAO3B,MAAO7C,EAAE8E,eAd/D,iCAiBazE,GAAM,IAAD,OACXH,KAAKgC,MAAMsC,SAGdtE,KAAKuC,SAAS,CACZpC,IAAKA,EACLmE,SAAS,EACT3B,MAAO,OACN,kBAAM,EAAKkC,UAAU1E,QAzB5B,yCA6BI,IAAM2E,EAAO,IAAIC,KAAK,CAACpE,KAAKqE,UAAUhF,KAAKgC,MAAMqC,WAAY,CAACzC,KAAM,mCACpEqD,IAAUC,OAAOJ,EAAM,oBA9B3B,6BAiCST,GACLrE,KAAKuC,SAAS,CACZ8B,SAAUA,EACV1B,MAAO,KACP2B,SAAS,EACTnE,IAAKkE,EAASlE,QAtCpB,+BA0CY,IAAD,OACP,OAAO,6BACL,kBAAC,EAAD,CAAiBD,SAAU,SAACC,GAAD,OAAS,EAAKgF,WAAWhF,IAAMA,IAAKH,KAAKgC,MAAM7B,IAAKwB,SAAU,SAACxB,GAAD,OAAS,EAAKoC,SAAS,CAACpC,IAAKA,KAAOO,SAAU,SAACI,GAAD,OAAY,EAAKsE,OAAOtE,MAC9Jd,KAAKgC,MAAMW,OAAS,yBAAKxB,UAAU,iBAAiBnB,KAAKgC,MAAMW,OAC/D3C,KAAKgC,MAAMsC,SAAW,yBAAKnD,UAAU,WAAf,sBACrBnB,KAAKgC,MAAMsC,SAAWtE,KAAKgC,MAAMqC,UAAY,kBAAC,EAAD,CAASpB,QAASjD,KAAKgC,MAAMqC,SAASpB,QAC7BM,MAAOvD,KAAKgC,MAAMqC,SAASd,MAC3BE,WAAY,SAACtD,GAAD,OAAS,EAAKgF,WAAWhF,IACrCA,IAAKH,KAAKgC,MAAMqC,SAASlE,IACzBgE,WAAY,kBAAM,EAAKkB,2BAnDrF,GAAmCxD,IAAMC,WC5IzCwD,IAASC,OAAO,kBAAC,EAAD,MAAmBC,SAASC,eAAe,W","file":"static/js/main.0c884893.chunk.js","sourcesContent":["import './app.css';\n\nimport React from 'react';\nimport request from 'superagent-bluebird-promise';\nimport Dropzone from 'react-dropzone';\nimport _ from 'lodash';\n\nimport FileSaver from 'file-saver';\n\nclass GetUrlComponent extends React.Component {\n  submit(e) {\n    e.preventDefault();\n    this.props.onSubmit(this.props.url);\n  }\n\n  importResult(accepted) {\n    if(accepted.length !== 1)\n      return;\n\n    const reader = new FileReader();\n    reader.onload = (x) => this.props.onImport(JSON.parse(x.target.result));\n    reader.readAsText(accepted[0]);\n  }\n\n  render() {\n    return <Dropzone accept=\"application/json\"\n                     onDrop={(accepted) => this.importResult(accepted)}\n                     className=\"url-dropzone\"\n                     acceptClassName=\"url-dropzone-accept\"\n                     rejectClassName=\"url-dropzone-reject\"\n                     disableClick={true}>\n      {_ => <form className=\"url-container\" onSubmit={(e) => this.submit(e)}>\n        <input className=\"url-input\" value={this.props.url} placeholder=\"Enter Url\" onChange={(e) => this.props.onChange(e.target.value)} />\n        <input type=\"submit\" className=\"url-go\" value=\"Go!\" />\n      </form>}\n    </Dropzone>;\n  }\n}\n\nclass ResultSection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false\n    }\n  }\n\n  render() {\n    const errors = this.props.result.errors || [];\n    const warnings = this.props.result.warnings || [];\n    const expandable = this.props.children || errors.length > 0 || warnings.length > 0;\n    return <section className={`result ${this.state.active && 'active'}`}>\n      <header className={`result-header ${expandable && \"expandable\"}`} onClick={() => expandable && this.setState({active: !this.state.active})}>\n        <div className=\"clearfix\">\n          <h2 className=\"result-title\">{this.props.title}</h2>\n          <h3 className={`result-status result-status-${this.props.result.status} ${warnings.length > 0 ? \"result-status-WARN\" : \"\"}`}>\n            {this.props.result.status}\n          </h3>\n        </div>\n      </header>\n      <div className=\"result-body\">\n        {this.props.children && <div>{this.props.children}</div>}\n\n        {errors.length > 0 && <div>\n          <h4>Errors:</h4>\n          <ul>{errors.map((error, index) => <li key={index}>{error}</li>)}</ul>\n        </div>}\n\n        {warnings.length > 0 && <div>\n          <h4>Warnings:</h4>\n          <ul>{warnings.map((error, index) => <li key={index}>{error}</li>)}</ul>\n        </div>}\n      </div>\n    </section>\n  }\n}\n\nfunction toRow(category, key, value) {\n  return <tr key={`${category}/${key}`}>\n    <td>{category}</td>\n    <td className=\"debug-key\">{key}</td>\n    <td>{value}</td>\n  </tr>;\n}\n\nclass DebugSection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false\n    }\n  }\n\n  render() {\n    return <section className={`result ${this.state.active && 'active'}`}>\n      <header className={`result-header expandable`} onClick={() => this.setState({active: !this.state.active})}>\n        <div className=\"clearfix\">\n          <h2 className=\"result-title\">Debugging</h2>\n        </div>\n      </header>\n      <div className=\"result-body\">\n        <div>For a full list of rules, please see <a href=\"https://github.com/quintype/quintype-validator\" target=\"_blank\" rel=\"noopener noreferrer\">Readme.md</a></div>\n        <div>\n          <table>\n            <thead>\n              <tr>\n                <th>Category</th>\n                <th>Key</th>\n                <th>Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              {_(this.props.results).entries().flatMap(([category, result]) => _(result.debug).entries().map(([key, value]) => toRow(category, key, value)).value()).value()}\n            </tbody>\n          </table>\n        </div>\n        {this.props.links.length > 0 && <div>\n          <h4>Links:</h4>\n          <ul>{this.props.links.map((link, index) => <li key={index}><button onClick={() => this.props.onValidate(link)}>validate</button> - {link}</li>)}</ul>\n        </div>}\n      </div>\n    </section>\n  }\n}\n\nclass Results extends React.Component {\n  render() {\n    return <div>\n      <ResultSection title=\"AMP\" result={this.props.results.amp} />\n      <ResultSection title=\"Caching Headers\" result={this.props.results.headers} />\n      <ResultSection title=\"Structured Data\" result={this.props.results.structured}>\n        <div>Number of Objects: {this.props.results.structured.numObjects}</div>\n        <div>Content Id: {this.props.results.structured.contentId}</div>\n      </ResultSection>\n      <ResultSection title=\"Facebook OG Tags\" result={this.props.results.og} />\n      <ResultSection title=\"SEO Rules\" result={this.props.results.seo} />\n      <ResultSection title=\"Robots\" result={this.props.results.robots} />\n\n      <DebugSection results={this.props.results} links={this.props.links} onValidate={this.props.onValidate}/>\n\n      <button className=\"results-download\" onClick={() => this.props.onDownload()}>Download As JSON</button>\n    </div>;\n  }\n}\n\nexport class HomeComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: \"\",\n      response: null,\n      loading: false,\n      error: null\n    };\n  }\n\n  loadRules(url) {\n    request.post(\"/api/validate.json\", {url: url})\n           .then(response => this.setState({response: response.body, loading: false, url: response.body.url}))\n           .catch(e => this.setState({loading: false, error: e.message}));\n  }\n\n  processUrl(url) {\n    if(this.state.loading)\n      return;\n\n    this.setState({\n      url: url,\n      loading: true,\n      error: null\n    }, () => this.loadRules(url));\n  }\n\n  downloadResponse() {\n    const blob = new Blob([JSON.stringify(this.state.response)], {type: \"application/json;charset=utf-8\"});\n    FileSaver.saveAs(blob, \"validator.json\");\n  }\n\n  import(response) {\n    this.setState({\n      response: response,\n      error: null,\n      loading: false,\n      url: response.url\n    })\n  }\n\n  render() {\n    return <div>\n      <GetUrlComponent onSubmit={(url) => this.processUrl(url)} url={this.state.url} onChange={(url) => this.setState({url: url})} onImport={(result) => this.import(result)}/>\n      {this.state.error && <div className=\"error-message\">{this.state.error}</div>}\n      {this.state.loading && <div className=\"loading\">Crunching Numbers</div>}\n      {!this.state.loading && this.state.response && <Results results={this.state.response.results}\n                                                              links={this.state.response.links}\n                                                              onValidate={(url) => this.processUrl(url)}\n                                                              url={this.state.response.url}\n                                                              onDownload={() => this.downloadResponse()} />}\n    </div>;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {HomeComponent} from './home-component';\n\nReactDOM.render(<HomeComponent />, document.getElementById('root'));\n"],"sourceRoot":""}