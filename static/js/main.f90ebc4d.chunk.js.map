{"version":3,"sources":["home-component.js","index.tsx"],"names":["GetUrlComponent","e","preventDefault","this","props","onSubmit","url","accepted","length","reader","FileReader","onload","x","onImport","JSON","parse","target","result","readAsText","accept","onDrop","importResult","className","acceptClassName","rejectClassName","disableClick","submit","value","placeholder","onChange","type","React","Component","ResultSection","state","active","errors","warnings","expandable","children","onClick","setState","title","status","map","error","index","key","DebugSection","href","rel","_","results","entries","flatMap","category","debug","toRow","links","link","onValidate","Results","showResult","undefined","structured","numObjects","contentId","onDownload","HomeComponent","response","loading","request","post","process","then","body","catch","message","loadRules","blob","Blob","stringify","FileSaver","saveAs","processUrl","import","downloadResponse","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f90ebc4d.chunk.js","sourcesContent":["import './app.scss';\n\nimport React from 'react';\nimport request from 'superagent-bluebird-promise';\nimport Dropzone from 'react-dropzone';\nimport _ from 'lodash';\n\nimport FileSaver from 'file-saver';\n\nclass GetUrlComponent extends React.Component {\n  submit(e) {\n    e.preventDefault();\n    this.props.onSubmit(this.props.url);\n  }\n\n  importResult(accepted) {\n    if(accepted.length !== 1)\n      return;\n\n    const reader = new FileReader();\n    reader.onload = (x) => this.props.onImport(JSON.parse(x.target.result));\n    reader.readAsText(accepted[0]);\n  }\n\n  render() {\n    return <Dropzone accept=\"application/json\"\n                     onDrop={(accepted) => this.importResult(accepted)}\n                     className=\"url-dropzone\"\n                     acceptClassName=\"url-dropzone-accept\"\n                     rejectClassName=\"url-dropzone-reject\"\n                     disableClick={true}>\n      <form className=\"url-container\" onSubmit={(e) => this.submit(e)} >\n        <input className=\"url-input\" value={this.props.url} placeholder=\"Enter Url\" onChange={(e) => this.props.onChange(e.target.value)}/>\n        <input type=\"submit\" className=\"url-go\" value=\"Go!\" />\n      </form>\n    </Dropzone>;\n  }\n}\n\nclass ResultSection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false\n    }\n  }\n\n  render() {\n    const errors = this.props.result.errors || [];\n    const warnings = this.props.result.warnings || [];\n    const expandable = this.props.children || errors.length > 0 || warnings.length > 0;\n    return <section className={`result ${this.state.active && 'active'}`}>\n      <header className={`result-header ${expandable && \"expandable\"}`} onClick={() => expandable && this.setState({active: !this.state.active})}>\n        <div className=\"clearfix\">\n          <h2 className=\"result-title\">{this.props.title}</h2>\n          <h3 className={`result-status result-status-${this.props.result.status} ${warnings.length > 0 ? \"result-status-WARN\" : \"\"}`}>\n            {this.props.result.status}\n          </h3>\n        </div>\n      </header>\n      <div className=\"result-body\">\n        {this.props.children && <div>{this.props.children}</div>}\n\n        {errors.length > 0 && <div>\n          <h4>Errors:</h4>\n          <ul>{errors.map((error, index) => <li key={index}>{error}</li>)}</ul>\n        </div>}\n\n        {warnings.length > 0 && <div>\n          <h4>Warnings:</h4>\n          <ul>{warnings.map((error, index) => <li key={index}>{error}</li>)}</ul>\n        </div>}\n      </div>\n    </section>\n  }\n}\n\nfunction toRow(category, key, value) {\n  return <tr key={`${category}/${key}`}>\n    <td>{category}</td>\n    <td className=\"debug-key\">{key}</td>\n    <td>{value}</td>\n  </tr>;\n}\n\nclass DebugSection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false\n    }\n  }\n\n  render() {\n    return <section className={`result ${this.state.active && 'active'}`}>\n      <header className={`result-header expandable`} onClick={() => this.setState({active: !this.state.active})}>\n        <div className=\"clearfix\">\n          <h2 className=\"result-title\">Debugging</h2>\n        </div>\n      </header>\n      <div className=\"result-body\">\n        <div>For a full list of rules, please see <a href=\"https://github.com/quintype/quintype-validator\" target=\"_blank\" rel=\"noopener noreferrer\">Readme.md</a></div>\n        <div>\n          <table>\n            <thead>\n              <tr>\n                <th>Category</th>\n                <th>Key</th>\n                <th>Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              {_(this.props.results).entries().flatMap(([category, result]) => _(result.debug).entries().map(([key, value]) => toRow(category, key, value)).value()).value()}\n            </tbody>\n          </table>\n        </div>\n        {this.props.links.length > 0 && <div>\n          <h4>Links:</h4>\n          <ul>{this.props.links.map((link, index) => <li key={index}><button onClick={() => this.props.onValidate(link)}>validate</button> - {link}</li>)}</ul>\n        </div>}\n      </div>\n    </section>\n  }\n}\n\nclass Results extends React.Component {\n  render() {\n    const showResult = (category, title) => this.props.results[category] ? <ResultSection title={title} result={this.props.results[category]} /> : undefined;\n\n    return <div>\n      {showResult(\"amp\", \"AMP\")}\n      {showResult(\"headers\", \"Caching Headers\")}\n      {this.props.results.structured\n        ? <ResultSection title=\"Structured Data\" result={this.props.results.structured}>\n            <div>Number of Objects: {this.props.results.structured.numObjects}</div>\n            <div>Content Id: {this.props.results.structured.contentId}</div>\n          </ResultSection>\n        : undefined}\n      {showResult('og', \"Facebook OG Tags\")}\n      {showResult('seo', \"SEO Rules\")}\n      {showResult('robots', \"Robots\")}\n      {showResult('pagespeed', \"PageSpeed\")}\n      {showResult('lighthouseSeo', \"LH SEO\")}\n      {showResult('lighthousePwa', \"PWA\")}\n\n      <DebugSection results={this.props.results} links={this.props.links} onValidate={this.props.onValidate}/>\n\n      <button className=\"results-download\" onClick={() => this.props.onDownload()}>Download As JSON</button>\n    </div>;\n  }\n}\n\nexport class HomeComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: \"\",\n      response: null,\n      loading: false,\n      error: null\n    };\n  }\n\n  loadRules(url) {\n    request.post(`${process.env.REACT_APP_API_HOST || \"\"}/api/validate.json`, {url: url})\n           .then(response => this.setState({response: response.body, loading: false, url: response.body.url}))\n           .catch(e => this.setState({loading: false, error: e.message}));\n  }\n\n  processUrl(url) {\n    if(this.state.loading)\n      return;\n\n    this.setState({\n      url: url,\n      loading: true,\n      error: null\n    }, () => this.loadRules(url));\n  }\n\n  downloadResponse() {\n    const blob = new Blob([JSON.stringify(this.state.response)], {type: \"application/json;charset=utf-8\"});\n    FileSaver.saveAs(blob, \"validator.json\");\n  }\n\n  import(response) {\n    this.setState({\n      response: response,\n      error: null,\n      loading: false,\n      url: response.url\n    })\n  }\n\n  render() {\n    return <div>\n      <GetUrlComponent onSubmit={(url) => this.processUrl(url)} url={this.state.url} onChange={(url) => this.setState({url: url})} onImport={(result) => this.import(result)}/>\n      {this.state.error && <div className=\"error-message\">{this.state.error}</div>}\n      {this.state.loading && <div className=\"loading\">Crunching Numbers</div>}\n      {!this.state.loading && this.state.response && <Results results={this.state.response.results}\n                                                              links={this.state.response.links}\n                                                              onValidate={(url) => this.processUrl(url)}\n                                                              url={this.state.response.url}\n                                                              onDownload={() => this.downloadResponse()} />}\n    </div>;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport {HomeComponent} from './home-component';\n\nReactDOM.render(<HomeComponent />, document.getElementById('root'));\n"],"sourceRoot":""}